<!--
#####################################################################################################################################################################
# USER STORY TEMPLATE
#####################################################################################################################################################################
-->

<!--
##################################################################################################
# DATE AND VERSION HANDLING INSTRUCTIONS
#
# Additional Instructions:
# - Before generating a user story, ensure that:
#   - An Epic reference exists
#   - Persona details are available
#   - Acceptance criteria are defined
# - If any are missing, ask the user to provide them.
##################################################################################################
-->

# Template Metadata
template:
  id: "user-story-template"
  category: "requirements"
  type: "user-story"
  version: "1.2"

metadata:
  author: "Codeium"
  status: "Active"
  last_updated: "${LAST_UPDATED_DATE}"

# AI Processing Configuration

## AI-Assisted Story Development
ai_assistance:
  document_type: "user_story"
  parent_template: "base_template"

ai_prompting_instructions:
  prompt_refinement_checklist:
    - verify_user_value
    - check_acceptance_criteria
    - ensure_testability
    - validate_dependencies
    - check_persona_alignment
    - verify_epic_alignment
    - validate_story_mapping
    - request_domain_context_if_missing

  base_prompt_structure: |
    Create or enhance a user story for ${PROJECT_NAME}.
    If Epic reference, Persona details, or acceptance criteria are missing, ask the user to provide them before proceeding.

    Provide details on:
    1. User Story and Value Proposition
    2. Story Mapping Context (Epic, Activity)
    3. Acceptance Criteria (Testable conditions)
    4. Technical Considerations and Dependencies

    Ensure the story:
    - Delivers clear user value (Persona-based)
    - Aligns with Epic goals
    - Is testable and properly sized

  prompt_templates:
    creation: |
      Before creating the User Story:
      - Check for an Epic reference (EP-${EPIC_ID})
      - Ensure Persona details are available
      - Confirm acceptance criteria or ask user for them

      Once inputs are confirmed, generate the story:
      - “As a (Persona) …”
      - Acceptance criteria, success metrics
      - Align with Epic and activity

    interactive_creation: |
      If Epic reference, Persona info, or acceptance criteria are missing, ask the user for them.
      Once all info is gathered, present the user story in the template structure.

    enhancement: |
      Enhancing existing story ${DOCUMENT_KEY}:
      - If missing Epic reference or Persona details, request them.
      - Validate and improve acceptance criteria, value, sizing.
      - Document all changes and maintain protected sections.

## Story Creation Process
story_creation:
  input_sources:
    - epic_backlog
    - user_personas
    - stakeholder_input
    - technical_constraints

  validation_rules:
    - completeness_check
    - size_validation
    - dependency_verification
    - epic_alignment

<!--
##################################################################################################
# TEMPLATE OUTPUT CONTENT STARTS HERE. 
###################################################################################################
-->

# User Story Content

## Basic Information
| Field         | Value                         |
|---------------|--------------------------------|
| Story ID      | US-${SEQUENCE}-${DESCRIPTOR}  |
| Epic Reference| EP-${EPIC_ID}                 |
| Created By    | ${AUTHOR}                     |
| Creation Date | ${CREATION_DATE}              |
| Last Updated  | ${LAST_UPDATED_DATE}          |
| Status        | ${STATUS}                     |

## Story Details

### Business Value
${BUSINESS_VALUE}

### User Story
As a ${PERSONA_REFERENCE},  
I want to ${ACTION},  
So that ${BENEFIT}

### Story Mapping
- Epic: ${EPIC_REFERENCE}
- Activity: ${ACTIVITY_REFERENCE}
- Task: ${TASK_REFERENCE}
- Sequence: ${SEQUENCE_NUMBER}

### Agile Metrics
| Metric         | Value                              |
|----------------|------------------------------------|
| Story Points   | ${STORY_POINTS} [1,2,3,5,8,13,21]  |
| Priority Level | ${PRIORITY_LEVEL} [MH/SH/CH]       |
| Sprint         | ${SPRINT}                          |

## Acceptance Criteria

### Scenario 1: ${SCENARIO_1_NAME}
**Given** ${PRECONDITION}  
**When** ${ACTION}  
**Then** ${RESULT}

### Scenario 2: ${SCENARIO_2_NAME}
**Given** ${PRECONDITION}  
**When** ${ACTION}  
**Then** ${RESULT}

### Quality Attributes
- [ ] Testable
- [ ] Clear
- [ ] Feasible

## Implementation Details
### Technical Notes
- ${TECH_NOTE_1}
- ${TECH_NOTE_2}

### Dependencies
#### Technical Dependencies
- ${TECH_DEPENDENCY_1}
- ${TECH_DEPENDENCY_2}

#### Business Dependencies
- ${BUS_DEPENDENCY_1}
- ${BUS_DEPENDENCY_2}

### Test Scenarios
1. ${TEST_SCENARIO_1}
2. ${TEST_SCENARIO_2}

## Definition of Done
- [ ] Code review completed
- [ ] Tests passing
- [ ] Documentation updated
- [ ] Acceptance criteria met
- [ ] Stakeholder approval obtained

## Related Information
### Related Stories
- ${RELATED_STORY_1}
- ${RELATED_STORY_2}

### Related Use Cases
- ${RELATED_UC_1}
- ${RELATED_UC_2}

### Notes and Assumptions
${NOTES}

# Version History
| Version | Date | Author | Changes |
|---------|------|--------|---------|
| ${VERSION} | ${LAST_UPDATED_DATE} | ${AUTHOR} | ${CHANGES} |

